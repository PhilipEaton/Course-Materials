<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ page.title }}</title>

  <!-- KaTeX -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      renderMathInElement(document.body, {
        delimiters: [
          {left: "$$", right: "$$", display: true},
          {left: "$", right: "$", display: false},
          {left: "\\[", right: "\\]", display: true},
          {left: "\\(", right: "\\)", display: false}
        ],
        throwOnError: false
      });
    });
  </script>

  <style>
    :root {
      --text-width: 42rem;     /* ~6.5 inches */
      --line-height: 1.55;
    }

    body {
      margin: 0;
      padding: 3rem 1rem;
      background: #ffffff;
      color: #111;
      font-family:
        "Latin Modern Roman",
        "Computer Modern",
        "Georgia",
        "Times New Roman",
        serif;
      line-height: var(--line-height);
      font-size: 18px;
    }

    main {
      max-width: var(--text-width);
      margin: 0 auto;
    }

    /* Titles */
    h1 {
      font-size: 1.9rem;
      text-align: center;
      margin-bottom: 2.5rem;
      font-weight: normal;
    }

    h2 {
      font-size: 1.3rem;
      margin-top: 2.5rem;
      margin-bottom: 0.75rem;
      font-weight: bold;
    }

    h3 {
      font-size: 1.1rem;
      margin-top: 2rem;
      margin-bottom: 0.5rem;
      font-weight: bold;
    }

    /* Paragraphs */
    p {
      margin: 0.75rem 0;
    }

    main p {
      text-align: justify;
      text-justify: inter-word;
      hyphens: auto;
    }

    /* Display math spacing */
    .katex-display {
      margin: 1.5rem 0;
    }

    .katex-display .katex {
        font-size: 0.95em;
    }

    .katex {
      font-size: 1em;
    }

    /* Figures */
    figure {
      margin: 2rem auto;
      text-align: center;
    }

    figcaption {
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }

    /* Tables */
    table {
      border-collapse: collapse;
      margin: 1.5rem auto;
    }

    th, td {
      padding: 0.5rem 1rem; /* vertical | horizontal */
      border: 1px solid #ccc;
    }

    
    /* Examples */
    .example {
      border-left: 4px solid #444;
      padding: 0.75rem 1rem;
      margin: 1.5rem 0;
      background: #f9f9f9;
    }
    .example::before {
      content: "Example.";
      font-weight: bold;
      display: block;
      margin-bottom: 0.25rem;
        }

    /* Results */
    .result {
      border-left: 4px solid #003366;
      padding: 0.75rem 1rem;
      margin: 1.5rem 0;
      background: #f4f7fb;
    }
    .result::before {
      content: "Result.";
      font-weight: bold;
      display: block;
      margin-bottom: 0.25rem;
    }

    /* Warnings */
    .warning {
      border-left: 4px solid #aa0000;
      padding: 0.75rem 1rem;
      margin: 1.5rem 0;
      background: #fff5f5;
     }

    .warning::before {
      content: "Common Mistake.";
      font-weight: bold;
      display: block;
      margin-bottom: 0.25rem;
    }

    /* Summary */
    .summary {
      border-left: 4px solid #d9ce00;
      padding: 0.75rem 1rem;
      margin: 1.5rem 0;
      background: #ffffff;
     }

    .summary::before {
      content: "Common Mistake.";
      font-weight: bold;
      display: block;
      margin-bottom: 0.25rem;
    }

    /* Code Input */
    .codeinput {
      border-left: 4px solid #444;
      padding: 0.75rem 1rem;
      margin: 1.5rem 0;
      background: #f9f9f9;
    }
    .codeinput::before {
      content: "Input:";
      font-weight: bold;
      display: block;
      margin-bottom: 0.25rem;
        }

    /* Code Output */
    .codeoutput {
      border-left: 4px solid #009216;
      padding: 0.75rem 1rem;
      margin: 1.5rem 0;
      background: #fafffa;
    }
    .codeoutput::before {
      content: "Output:";
      font-weight: bold;
      display: block;
      margin-bottom: 0.25rem;
    }

    .codeinput pre,
    .codeoutput pre {
      margin: 0;
      white-space: pre-wrap;
      overflow-wrap: anywhere;
      word-break: break-word;
    }
    .codeinput code,
    .codeoutput code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 0.95rem;
    }

    /* Course navigation (LaTeX handout style) */
    .course-nav {
      margin-bottom: 2rem;
    }
    
    .course-nav-links {
      text-align: center;
      font-size: 0.95rem;
    }
    
    .course-nav a {
      color: #003366;
      text-decoration: none;
    }
    
    .course-nav a:hover {
      text-decoration: underline;
    }


    /* Links – subtle like PDFs */
    a {
      color: #003366;
    }

    .two-column {
      display: flex;
      gap: 2rem;
      align-items: flex-start;
    }

    .two-column .column {
      flex: 1;
    }

    .two-column .katex {
      font-size: 11pt;
    }

    /* Stack columns on small screens */
    @media (max-width: 768px) {
      .two-column {
        flex-direction: column;
      }
    }

    /* Print Style */
    @media print {

      /* Page geometry (LaTeX-ish) */
      @page {
        size: letter;
        margin: 1.0in;
      }

      pre, code, pre code {
        white-space: pre-wrap !important;
        overflow-wrap: anywhere !important;
        word-break: break-word !important;
        max-width: 100% !important;
      }

      .example, .result, .warning {
        box-sizing: border-box;
        max-width: 100% !important;
        overflow: visible; /* prevents border from being clipped by overflow */
      }

      .example *, .result *, .warning * {
        max-width: 100% !important;
      }

      table {
        width: 100% !important;
        max-width: 100% !important;
        table-layout: fixed;
      }

      th, td {
        word-wrap: break-word;
        overflow-wrap: anywhere;
      }

      img, svg {
        max-width: 100% !important;
        height: auto !important;
      }

      /* Hide navigation / site chrome */
      header, nav, footer, .course-nav, .site-nav {
        display: none !important;
      }

      /* Base typography */
      body {
        padding: 0 !important;
        padding-top: 0;
        margin: 0 !important;
        background: #fff !important;
        color: #000 !important;

        /* LaTeX-ish serif stack; will fall back gracefully */
        font-family: "Latin Modern Roman", "CMU Serif", "Times New Roman", serif;
        font-size: 11pt;
        line-height: 1.35;
      }

      main {
        max-width: none !important;
        margin: 0 !important;
      }

      /* Headings (LaTeX-like hierarchy) */
      h1 {
        font-size: 16pt;
        font-weight: normal;
        text-align: center;
        margin: 0 0 18pt 0;
      }

      h1:first-child {
        margin-top: 0;
      }

      h2 {
        font-size: 13pt;
        font-weight: bold;
        margin: 18pt 0 6pt 0;
      }

      h3 {
        font-size: 11pt;
        font-weight: bold;
        margin: 12pt 0 4pt 0;
      }

      /* Paragraphs: justified text like LaTeX */
      p {
        margin: 0 0 8pt 0;
        text-align: justify;
        text-justify: inter-word;
      }

      /* Prevent ugly page breaks */
      h1, h2, h3 {
        break-after: avoid;
        page-break-after: avoid;
      }

      figure, table, pre, blockquote, .codeinput, .codeoutput {
        break-inside: avoid;
        page-break-inside: avoid;
      }

      .katex-display .katex {
        font-size: 0.95em;
      }

      .katex {
        font-family: KaTeX_Main, Times New Roman, serif !important;
        font-size: 1em !important;
      }

      .katex {
        font-display: block;
      }

      /* Allow page breaks through long display math */
      .katex-display, .katex-display * {
        break-inside: auto !important;
        overflow: visible !important;
      }

      /* Figure size */
      img {
        max-width: 50% !important;
        display: block !important;
        margin: 0.75rem auto;
      }

      /* Figure caption style */
      figcaption {
        font-size: 10pt;
        text-align: center;
        margin-top: 6pt;
      }

      /* Tables: LaTeX-ish rules */
      table {
        width: 100%;
        max-width: 600pt;
        border-collapse: collapse;
        margin: 10pt 0;
        font-size: 10pt;
      }

      th, td {
        border: 1px solid #000; /* classic “boxed” look */
        padding: 4pt 6pt;
        vertical-align: top;
      }

      thead th {
        font-weight: bold;
      }

      /* Optional: Booktabs-like (no vertical rules) */
      .booktabs th, .booktabs td { border-left: none; border-right: none; }
      .booktabs thead th { border-top: 1px solid #000; border-bottom: 1px solid #000; }
      .booktabs tbody td { border-bottom: 0.5px solid #000; }
      .booktabs tbody tr:last-child td { border-bottom: 1px solid #000; }

      /* Code blocks: compact like listings */
      pre, code {
        font-family: "Latin Modern Mono", "CMU Typewriter Text", ui-monospace, Menlo, Consolas, monospace;
        font-size: 9.5pt;
      }

      pre {
        margin: 8pt 0;
        padding: 6pt 8pt;
        border: 1px solid #000;
        background: #fff;
        white-space: pre-wrap;
        overflow-wrap: anywhere;
      }

      /* “Theorem-style” boxes (your example/result/warning) */
      .example, .result, .warning {
        border: 1px solid #000;
        background: #fff !important;
        padding: 8pt 10pt;
        margin: 10pt 0;
      }

      /* Page-break helper */
      .page-break {
        page-break-before: always;
        break-before: page;
      }
      
      .work-space-tiny { height: 1.2rem; }
      .work-space-sm { height: 7rem; }
      .work-space-md { height: 10rem; }
      .work-space-lg { height: 13rem; }

      .two-column {
        flex-direction: row;
      }
      .two-column .katex {
        font-size: 11pt;
      }

    }

  </style>
</head>
<body>
  <main>
    {% if page.course_home %}
      {% include course-nav.html %}
    {% endif %}
    
    {{ content }}
  </main>
</body>
</html>
